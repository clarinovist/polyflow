const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

async function main() {
    const drafts = await prisma.journalEntry.findMany({
        where: { status: 'DRAFT', isAutoGenerated: true }
    });

    console.log(`Found ${drafts.length} auto-generated draft journals to post.`);

    for (const draft of drafts) {
        await prisma.journalEntry.update({
            where: { id: draft.id },
            data: { status: 'POSTED' }
        });
        console.log(`- Posted ${draft.entryNumber}`);
    }
}

main()
    .catch(console.error)
    .finally(() => prisma.$disconnect());
